<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel - Azaan</title>
</head>
<body>
  <h2>নতুন প্রোডাক্ট যুক্ত করুন</h2>
  <input type="text" id="name" placeholder="নাম" />
  <input type="text" id="price" placeholder="মূল্য" />
  <input type="text" id="img" placeholder="ইমেজ URL" />
  <button onclick="addProduct()">✅ যোগ করুন</button>

  <h2>সকল প্রোডাক্ট</h2>
  <ul id="productList"></ul>

  <script type="module">
    import { db, collection, addDoc, deleteDoc, doc, getDocs } from './firebase.js';

    const productsRef = collection(db, "products");

    async function addProduct() {
      const name = document.getElementById("name").value;
      const price = document.getElementById("price").value;
      const img = document.getElementById("img").value;

      await addDoc(productsRef, { name, price, img });
      loadProducts();
    }

    async function deleteProduct(id) {
      await deleteDoc(doc(db, "products", id));
      loadProducts();
    }

    async function loadProducts() {
      const list = document.getElementById("productList");
      list.innerHTML = "";

      const snapshot = await getDocs(productsRef);
      snapshot.forEach(docSnap => {
        const data = docSnap.data();
        const li = document.createElement("li");
        li.innerHTML = `
          <img src="${data.img}" width="50" /> ${data.name} - ${data.price}
          <button onclick="deleteProduct('${docSnap.id}')">❌</button>
        `;
        list.appendChild(li);
      });
    }

    window.deleteProduct = deleteProduct;
    loadProducts();
  </script>
</body>
</html>
